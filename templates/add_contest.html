<!DOCTYPE html>
<html>
  <head>
    <title>Add Contest | CMOC Control Panel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
      rel="stylesheet"
    />
    <link href="/assets/output.css" rel="stylesheet" />
    <script
      src="https://kit.fontawesome.com/e47ece3e74.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <main class="container py-20">
      <div class="flex items-center justify-between">
        <img
          src="https://cdn.discordapp.com/attachments/1090989036358864917/1253113607127044198/image.png?ex=6675553d&is=667403bd&hm=8d8fad714ff5f1d8bf962ea03765f8fa75a216682a48a99b83d7852c464747bc&"
          style="height: 60px !important"
        />
        <h2 class="text-right text-lg">
          <b>CMOC</b><br />
          Control Panel
        </h2>
      </div>
      <br />
      <hr />
      <br />
      <div class="flex items-center justify-between">
        <a
          class="col-span-2 inline-flex gap-3 items-center"
          href="/panel/contests"
          ><i class="fa-solid fa-chevron-left"></i><p class="hover:underline">Return to Contests</p></a
        >
        <p class="opacity-50">
          CMOC <i class="fa-solid fa-caret-right"></i> Contests
          <i class="fa-solid fa-caret-right"></i> Add Contest
        </p>
      </div>
      <br />
      {{if .Error}}
      <p style="color: red">{{.Error}}</p>
      {{end}}
      <div
        class="w-100 h-50 p-20 rounded-3xl"
        style="
          background: url('https://rc24.xyz/goodies/wallpapers/CMO_Channel_BG_orange_1600x900.png');
          box-shadow: 0px 0px 60px #d3d68c60;
        "
      >
        <div
          class="p-2 bg-gray-100 border-2 border-gray-500 rounded-3xl"
          style="background-color: rgb(76, 130, 163); border: 5px solid white"
        >
          <p class="ml-1 text-white text-lg">
            <span id="randomInt"></span> days remaining
          </p>
          <div class="mt-2 bg-white p-1 rounded-xl flex flex-row items-center">
            <img
              id="thumbnailPreview"
              src="https://cdn.discordapp.com/attachments/1105166064326803496/1253421730332934174/Screenshot_2024-06-20_at_20.50.18.png?ex=6675cb73&is=667479f3&hm=c9721b16f6b337342b96aa2f202c91b9d569cab6c1226d2b7bb9dd05685c00a8&"
              alt="Thumbnail Preview"
              class="p-1 mr-40 w-32 h-32 rounded-xl"
            />
            <h2
              id="contestName"
              class="col-start-1 col-span-full text-2xl"
            ></h2>
          </div>
        </div>
      </div>
      <br>
      <br>
      <form
        action="/panel/contests/add"
        method="post"
        enctype="multipart/form-data"
        class="col-start-1 col-span-full main_grid"
      >
        <div class="input col-start-1 col-span-3">
          <label>Contest Name</label>
          <input
            type="text"
            name="name"
            required
            placeholder="Contest Name"
            class="border rounded-lg bg-gray-100 p-2"
            oninput="updateContestName(event)"
          />
        </div>
        <div class="input col-start-1 col-span-2">
          <span>Has Special Award?</span>
          <label class="inline-flex items-center cursor-pointer">
            <input type="checkbox" name="special_award" class="sr-only peer" />
            <div
              class="relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-400"
            ></div>
          </label>
        </div>
        <div class="input col-start-1 col-span-2">
          <span>Thumbnail</span>
          <!--TODO: add a image placeholder and fix img sizing-->
          <label
            class="bg-blue-200 cursor-pointer p-4 rounded-lg transition-all hover:bg-blue-300"
          >
            <input
              type="file"
              name="thumbnail"
              type="image/png"
              class="hidden"
              onchange="previewImage(event, 'thumbnailPreview')"
            />
          </label>
        </div>
        <div class="input col-start-3 col-span-2">
          <span>Souvenir</span>
          <!--TODO: add a image placeholder and fix img sizing-->
          <label
            class="bg-blue-200 cursor-pointer p-4 rounded-lg transition-all hover:bg-blue-300"
          >
            <input
              type="file"
              name="souvenir"
              type="image/png"
              class="hidden"
              onchange="previewImage(event, 'souvenirPreview')"
            />
            <img
              id="souvenirPreview"
              src="#"
              alt="Souvenir Preview"
              class="w-32 h-32"
            />
          </label>
        </div>
        <div class="input col-start-5 col-span-2">
          <label>Open Time</label>
          <input
            type="date"
            name="open_time"
            required
            class="rounded-full px-5 py-2 bg-blue-200"
          />
        </div>
        <input
          type="submit"
          value="Submit"
          class="submit_button col-end-13 place-self-start"
        />
      </form>
    </main>
  </body>

  <script>
    function previewImage(event, id) {
      const reader = new FileReader();
      reader.onload = function () {
        const output = document.getElementById(id);
        output.src = reader.result;
      };
      reader.readAsDataURL(event.target.files[0]);
    }

    function updateContestName(event) {
      document.getElementById("contestName").textContent = event.target.value;
    }

    document.addEventListener("DOMContentLoaded", function () {
      document.getElementById("randomInt").innerHTML = Math.floor(
        Math.random() * (10 - 2 + 1) + 2
      );
    });
  </script>
</html>
