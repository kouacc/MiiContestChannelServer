<!DOCTYPE html>
<html>
<head>
    <title>Add Contest</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link href="/assets/output.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/e47ece3e74.js" crossorigin="anonymous"></script>
</head>
<body>
    <main class="container main_grid py-20">
        <a class="col-span-2 inline-flex gap-3 items-center" href="/panel/contests"><i class="fa-solid fa-chevron-left"></i>Return to Contests</a>
        <h1 class="col-start-1 col-span-full">Add Contest</h1>
        {{if .Error}}
        <p style="color:red;">{{.Error}}</p>
        {{end}}
        <h1 id="contestName" class="col-start-1 col-span-full"></h1>
        <form action="/panel/contests/add" method="post" enctype="multipart/form-data" class="col-start-1 col-span-full main_grid">
            <div class="input col-start-1 col-span-3">
                <label>Contest Name</label>
                <input type="text" name="name" required placeholder="Contest Name" class="border rounded-lg bg-gray-100 p-2" oninput="updateContestName(event)">
            </div>
            <div class="input col-start-1 col-span-2">
                <span>Has Special Award?</span>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" name="special_award" class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-400"></div>
                </label>
            </div>
            <div class="input col-start-1 col-span-2">
                <span>Thumbnail</span>
                <!--TODO: add a image placeholder and fix img sizing-->
                <label class="bg-blue-200 cursor-pointer p-4 rounded-lg transition-all hover:bg-blue-300">
                    <input type="file" name="thumbnail" type="image/png" class="hidden" onchange="previewImage(event, 'thumbnailPreview')">
                    <img id="thumbnailPreview" src="#" alt="Thumbnail Preview" class="w-24 h-24">
                </label>
            </div>
            <div class="input col-start-3 col-span-2">
                <span>Souvenir</span>
                <!--TODO: add a image placeholder and fix img sizing-->
                <label class="bg-blue-200 cursor-pointer p-4 rounded-lg transition-all hover:bg-blue-300">
                    <input type="file" name="souvenir" type="image/png" class="hidden" onchange="previewImage(event, 'souvenirPreview')">
                    <img id="souvenirPreview" src="#" alt="Souvenir Preview" class="w-32 h-32">
                </label>
            </div>
            <div class="input col-start-5 col-span-2">
                <label>Open Time</label>
                <input type="date" name="open_time" required class="rounded-full px-5 py-2 bg-blue-200">
            </div>
            <input type="submit" value="Submit" class="submit_button col-end-13 place-self-start">
        </form>
    </main>
</body>

<script>
function previewImage(event, id) {
    const reader = new FileReader();
    reader.onload = function(){
        const output = document.getElementById(id);
        output.src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
}

function updateContestName(event) {
    document.getElementById('contestName').textContent =  event.target.value;
}
</script>
</html>
